<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streak Coaching Dashboard - /vibe workshop</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 20px; background: #0f1419; color: #c9d1d9;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #58a6ff; margin: 0; }
        .header p { color: #7d8590; margin: 10px 0; }
        .health-banner { 
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151; border-radius: 12px; padding: 20px;
            margin-bottom: 30px; text-align: center;
        }
        .phase-indicator {
            font-size: 1.5em; font-weight: bold; margin-bottom: 10px;
            padding: 10px 20px; border-radius: 20px; display: inline-block;
        }
        .phase-building { background: #065f46; color: #d1fae5; }
        .phase-peak { background: #7c2d12; color: #fed7aa; }
        .phase-mixed { background: #92400e; color: #fef3c7; }
        .phase-needs { background: #374151; color: #f3f4f6; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; }
        .card { 
            background: #161b22; border: 1px solid #30363d; border-radius: 8px; 
            padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .card h3 { color: #f0f6fc; margin-top: 0; display: flex; align-items: center; }
        .card-icon { margin-right: 10px; font-size: 1.3em; }
        .coaching-item {
            background: #21262d; border-left: 4px solid #58a6ff;
            padding: 15px; margin: 10px 0; border-radius: 0 6px 6px 0;
        }
        .coaching-encouragement { border-left-color: #66bb6a; }
        .coaching-celebration { border-left-color: #ffa726; }
        .coaching-strategy { border-left-color: #42a5f5; }
        .coaching-warning { border-left-color: #ff6b6b; }
        .priority-indicator {
            float: right; padding: 2px 8px; border-radius: 12px;
            font-size: 0.8em; font-weight: bold;
        }
        .priority-5 { background: #dc2626; color: white; }
        .priority-4 { background: #ea580c; color: white; }
        .priority-3 { background: #d97706; color: white; }
        .priority-2 { background: #059669; color: white; }
        .priority-1 { background: #0284c7; color: white; }
        .timing-badge {
            display: inline-block; padding: 2px 6px; margin-left: 10px;
            background: #374151; color: #f3f4f6; border-radius: 4px; font-size: 0.7em;
        }
        .user-coaching {
            margin-bottom: 20px; padding: 15px; background: #0d1117;
            border-radius: 8px; border: 1px solid #21262d;
        }
        .user-title { 
            font-weight: bold; color: #58a6ff; margin-bottom: 10px; 
            display: flex; justify-content: space-between; align-items: center;
        }
        .streak-info { font-size: 0.9em; color: #7d8590; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin: 20px 0; }
        .stat-item { text-align: center; padding: 15px; background: #21262d; border-radius: 6px; }
        .stat-value { font-size: 1.8em; font-weight: bold; color: #58a6ff; }
        .stat-label { font-size: 0.9em; color: #7d8590; margin-top: 5px; }
        .health-meter {
            height: 20px; background: #21262d; border-radius: 10px; overflow: hidden; margin: 10px 0;
        }
        .health-fill {
            height: 100%; background: linear-gradient(90deg, #ff6b6b 0%, #ffa726 50%, #66bb6a 100%);
            transition: width 0.3s ease;
        }
        .no-insights {
            text-align: center; color: #7d8590; font-style: italic; padding: 20px;
        }
        .refresh-btn {
            background: #238636; color: white; border: none; padding: 10px 20px;
            border-radius: 6px; cursor: pointer; margin-left: 10px;
        }
        .refresh-btn:hover { background: #2ea043; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¯ Streak Coaching Dashboard</h1>
            <p>Personalized insights and community coaching for /vibe workshop</p>
            <p><strong>Last Analysis:</strong> <span id="lastUpdate"></span>
                <button class="refresh-btn" onclick="generateNewInsights()">ðŸ”„ Refresh Insights</button>
            </p>
        </div>

        <!-- Community Health Banner -->
        <div class="health-banner">
            <div id="phaseIndicator" class="phase-indicator phase-building">ðŸŒ± Building Momentum</div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="healthScore">100%</div>
                    <div class="stat-label">Engagement Rate</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgStreak">1.0</div>
                    <div class="stat-label">Avg Streak</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="retention">100%</div>
                    <div class="stat-label">Retention</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalUsers">2</div>
                    <div class="stat-label">Active Users</div>
                </div>
            </div>
            <div class="health-meter">
                <div class="health-fill" id="healthFill" style="width: 100%"></div>
            </div>
        </div>

        <div class="grid">
            <!-- Community Coaching -->
            <div class="card">
                <h3><span class="card-icon">ðŸŒŸ</span>Community Coaching</h3>
                <div id="communityCoaching">
                    <div class="coaching-item coaching-encouragement">
                        <span class="priority-indicator priority-3">Priority 3</span>
                        <strong>ðŸ”¥ Building Momentum!</strong>
                        <span class="timing-badge">today</span>
                        <p>The community is building momentum! Let's keep this energy going - every day counts!</p>
                    </div>
                </div>
            </div>

            <!-- Personal Coaching -->
            <div class="card">
                <h3><span class="card-icon">ðŸ‘¥</span>Personal Coaching</h3>
                <div id="personalCoaching">
                    <div class="user-coaching">
                        <div class="user-title">
                            @demo_user
                            <span class="streak-info">Day 1 â€¢ Best: 1</span>
                        </div>
                        <div class="coaching-item coaching-encouragement">
                            <span class="priority-indicator priority-4">Priority 4</span>
                            <strong>ðŸŽ¯ Almost There!</strong>
                            <span class="timing-badge">immediate</span>
                            <p>You're only 2 days away from your 3-day milestone! ðŸŽ¯</p>
                        </div>
                        <div class="coaching-item coaching-celebration">
                            <span class="priority-indicator priority-2">Priority 2</span>
                            <strong>ðŸš€ New Territory!</strong>
                            <span class="timing-badge">today</span>
                            <p>You're in uncharted territory! Every day now is a new personal record. ðŸš€</p>
                        </div>
                    </div>
                    
                    <div class="user-coaching">
                        <div class="user-title">
                            @vibe_champion
                            <span class="streak-info">Day 1 â€¢ Best: 1</span>
                        </div>
                        <div class="coaching-item coaching-encouragement">
                            <span class="priority-indicator priority-4">Priority 4</span>
                            <strong>ðŸŽ¯ Almost There!</strong>
                            <span class="timing-badge">immediate</span>
                            <p>You're only 2 days away from your 3-day milestone! ðŸŽ¯</p>
                        </div>
                        <div class="coaching-item coaching-celebration">
                            <span class="priority-indicator priority-2">Priority 2</span>
                            <strong>ðŸš€ New Territory!</strong>
                            <span class="timing-badge">today</span>
                            <p>You're in uncharted territory! Every day now is a new personal record. ðŸš€</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pattern Analysis -->
            <div class="card">
                <h3><span class="card-icon">ðŸ§ </span>Pattern Analysis</h3>
                <div id="patternAnalysis">
                    <div class="coaching-item coaching-strategy">
                        <strong>ðŸ“Š Fresh Start Phase</strong>
                        <p><strong>Momentum Indicators:</strong></p>
                        <ul>
                            <li>@demo_user: Building new personal record</li>
                            <li>@vibe_champion: Building new personal record</li>
                        </ul>
                        <p><strong>Key Insight:</strong> Both users are in their first day - perfect time to establish positive patterns!</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card">
                <h3><span class="card-icon">âš¡</span>Recommended Actions</h3>
                <div id="quickActions">
                    <div class="coaching-item coaching-encouragement">
                        <strong>Immediate Actions</strong>
                        <ul>
                            <li>ðŸŽ¯ Send milestone proximity encouragement to both users</li>
                            <li>ðŸš€ Celebrate personal record achievements</li>
                            <li>ðŸ’ª Post community momentum message</li>
                        </ul>
                    </div>
                    <div class="coaching-item coaching-strategy">
                        <strong>Today's Focus</strong>
                        <ul>
                            <li>ðŸ“± Day 2 retention is critical - consider gentle check-ins</li>
                            <li>ðŸŽŠ Prepare for potential 3-day milestone celebrations</li>
                            <li>ðŸ“Š Monitor weekend engagement patterns</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateTimestamp() {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleString();
        }

        function updatePhaseIndicator(phase) {
            const indicator = document.getElementById('phaseIndicator');
            indicator.className = 'phase-indicator';
            
            switch(phase) {
                case 'building_momentum':
                    indicator.className += ' phase-building';
                    indicator.innerHTML = 'ðŸ”¥ Building Momentum';
                    break;
                case 'momentum_peak':
                    indicator.className += ' phase-peak';
                    indicator.innerHTML = 'ðŸš€ Peak Momentum';
                    break;
                case 'mixed_engagement':
                    indicator.className += ' phase-mixed';
                    indicator.innerHTML = 'âš–ï¸ Mixed Engagement';
                    break;
                case 'needs_activation':
                    indicator.className += ' phase-needs';
                    indicator.innerHTML = 'ðŸ’¡ Needs Activation';
                    break;
                default:
                    indicator.className += ' phase-building';
                    indicator.innerHTML = 'ðŸŒ± Getting Started';
            }
        }

        function generateNewInsights() {
            // Simulate generating new insights
            const insights = [
                "Both users approaching critical day-2 retention point",
                "Perfect opportunity for first milestone celebrations",
                "Community energy is high - capitalize on momentum",
                "Weekend engagement strategy needed for sustainability"
            ];
            
            // Show loading state
            const btn = event.target;
            btn.textContent = 'ðŸ”„ Analyzing...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.textContent = 'ðŸ”„ Refresh Insights';
                btn.disabled = false;
                updateTimestamp();
                
                // Could integrate with actual coaching system here
                alert('ðŸ’¡ New insights generated! Check the dashboard for updated recommendations.');
            }, 2000);
        }

        // Initialize
        updateTimestamp();
        updatePhaseIndicator('building_momentum');
        
        // Auto-refresh every 10 minutes
        setInterval(() => {
            updateTimestamp();
        }, 600000);
    </script>
</body>
</html>